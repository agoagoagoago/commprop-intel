/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/search/route";
exports.ids = ["app/api/search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_jordo_OneDrive_Desktop_commercial_industrial_properties_sg_industrial_lens_sg_src_app_api_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/search/route.ts */ \"(rsc)/./src/app/api/search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/search/route\",\n        pathname: \"/api/search\",\n        filename: \"route\",\n        bundlePath: \"app/api/search/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\jordo\\\\OneDrive\\\\Desktop\\\\commercial industrial properties sg\\\\industrial-lens-sg\\\\src\\\\app\\\\api\\\\search\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_jordo_OneDrive_Desktop_commercial_industrial_properties_sg_industrial_lens_sg_src_app_api_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzZWFyY2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNlYXJjaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqb3JkbyU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q2NvbW1lcmNpYWwlMjBpbmR1c3RyaWFsJTIwcHJvcGVydGllcyUyMHNnJTVDaW5kdXN0cmlhbC1sZW5zLXNnJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNqb3JkbyU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q2NvbW1lcmNpYWwlMjBpbmR1c3RyaWFsJTIwcHJvcGVydGllcyUyMHNnJTVDaW5kdXN0cmlhbC1sZW5zLXNnJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUM2RTtBQUMxSjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcam9yZG9cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxjb21tZXJjaWFsIGluZHVzdHJpYWwgcHJvcGVydGllcyBzZ1xcXFxpbmR1c3RyaWFsLWxlbnMtc2dcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcc2VhcmNoXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zZWFyY2gvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zZWFyY2hcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NlYXJjaC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGpvcmRvXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxcY29tbWVyY2lhbCBpbmR1c3RyaWFsIHByb3BlcnRpZXMgc2dcXFxcaW5kdXN0cmlhbC1sZW5zLXNnXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHNlYXJjaFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/search/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/search/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/**\r\n * Natural Language Property Search API\r\n * Uses Gemini 2.0 Flash with function calling to parse search queries\r\n */ \n\n// Initialize Gemini\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\n// Define the filterProperties tool for function calling\nconst filterPropertiesTool = {\n    name: 'filterProperties',\n    description: 'Filter industrial/commercial properties based on user search criteria. Call this function when the user wants to search, filter, or find properties.',\n    parameters: {\n        type: 'object',\n        properties: {\n            area: {\n                type: 'string',\n                description: 'The area/location in Singapore (e.g., \"Tuas\", \"Jurong\", \"Woodlands\", \"Ubi\", \"Tai Seng\")'\n            },\n            maxPrice: {\n                type: 'number',\n                description: 'Maximum price in SGD. Convert \"2M\" to 2000000, \"500K\" to 500000'\n            },\n            zoning: {\n                type: 'string',\n                enum: [\n                    'B1',\n                    'B2',\n                    'B1/B2',\n                    'any'\n                ],\n                description: 'Industrial zoning type. B1 is light industrial, B2 is heavy industrial'\n            },\n            minLease: {\n                type: 'number',\n                description: 'Minimum remaining lease in years (e.g., 30, 60, 99)'\n            },\n            propertyType: {\n                type: 'string',\n                enum: [\n                    'Factory/Warehouse',\n                    'Office',\n                    'Shop',\n                    'any'\n                ],\n                description: 'Type of property'\n            },\n            transactionType: {\n                type: 'string',\n                enum: [\n                    'Sale',\n                    'Rent',\n                    'any'\n                ],\n                description: 'Whether looking to buy or rent'\n            }\n        },\n        required: []\n    }\n};\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { query, history = [], thoughtSignature } = body;\n        if (!query || typeof query !== 'string') {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: 'Query is required'\n            }, {\n                status: 400\n            });\n        }\n        // Initialize the model with thinking enabled\n        const model = genAI.getGenerativeModel({\n            model: 'gemini-2.0-flash',\n            tools: [\n                {\n                    functionDeclarations: [\n                        filterPropertiesTool\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: 0.1\n            }\n        });\n        // Build conversation history with thought signature handling\n        const conversationHistory = [];\n        // Add previous history if exists\n        if (history.length > 0) {\n            conversationHistory.push(...history);\n        }\n        // Add the new user message\n        const userContent = {\n            role: 'user',\n            parts: [\n                {\n                    text: query\n                }\n            ]\n        };\n        // If we have a thought signature from previous turn, include it\n        if (thoughtSignature && conversationHistory.length > 0) {\n        // The thought signature should be associated with the last model response\n        // This helps maintain consistency in multi-turn conversations\n        }\n        // Start chat with history\n        const chat = model.startChat({\n            history: conversationHistory,\n            generationConfig: {\n                temperature: 0.1\n            }\n        });\n        // System prompt for context\n        const systemContext = `You are an AI assistant for Industrial Lens SG, a Singapore commercial/industrial property search platform. \nWhen users ask about finding properties, use the filterProperties function to extract their search criteria.\nBe helpful and conversational. If the user's request is unclear, ask clarifying questions.\nSingapore areas include: Tuas, Jurong, Woodlands, Ubi, Tai Seng, Paya Lebar, Changi, Mandai, etc.\nPrice formats: \"2M\" = 2000000, \"500K\" = 500000, \"3.5M\" = 3500000.`;\n        // Send the query with system context\n        const fullQuery = conversationHistory.length === 0 ? `${systemContext}\\n\\nUser query: ${query}` : query;\n        const result = await chat.sendMessage(fullQuery);\n        const response = result.response;\n        // Extract thought signature if present (for multi-turn consistency)\n        let newThoughtSignature;\n        // Check if there's a function call in the response\n        const functionCall = response.functionCalls()?.[0];\n        let filters;\n        let message;\n        if (functionCall && functionCall.name === 'filterProperties') {\n            // Extract the filter parameters from the function call\n            filters = functionCall.args;\n            // Generate a user-friendly message\n            const filterDescriptions = [];\n            if (filters.area) filterDescriptions.push(`in ${filters.area}`);\n            if (filters.maxPrice) filterDescriptions.push(`under $${(filters.maxPrice / 1000000).toFixed(1)}M`);\n            if (filters.zoning && filters.zoning !== 'any') filterDescriptions.push(`${filters.zoning} zoning`);\n            if (filters.minLease) filterDescriptions.push(`with at least ${filters.minLease} year lease`);\n            if (filters.propertyType && filters.propertyType !== 'any') filterDescriptions.push(filters.propertyType);\n            if (filters.transactionType && filters.transactionType !== 'any') filterDescriptions.push(`for ${filters.transactionType.toLowerCase()}`);\n            message = filterDescriptions.length > 0 ? `Searching for properties ${filterDescriptions.join(', ')}` : 'Showing all properties';\n        } else {\n            // Regular text response (clarifying question or general response)\n            message = response.text() || 'How can I help you find a property?';\n        }\n        // Build updated history for the next turn\n        const updatedHistory = [\n            ...conversationHistory,\n            userContent,\n            {\n                role: 'model',\n                parts: response.candidates?.[0]?.content?.parts || [\n                    {\n                        text: message\n                    }\n                ]\n            }\n        ];\n        // Extract thought signature from response metadata if available\n        // This is used for multi-turn thinking consistency\n        const responseMetadata = response.candidates?.[0];\n        if (responseMetadata) {\n            // Store a hash/signature for the thinking state\n            newThoughtSignature = Buffer.from(JSON.stringify({\n                turn: updatedHistory.length,\n                timestamp: Date.now()\n            })).toString('base64');\n        }\n        const searchResponse = {\n            filters,\n            message,\n            thoughtSignature: newThoughtSignature,\n            history: updatedHistory\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json(searchResponse);\n    } catch (error) {\n        console.error('Search API error:', error);\n        // Handle specific Gemini errors\n        if (error instanceof Error) {\n            if (error.message.includes('400')) {\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                    error: 'Invalid request. Please try again.',\n                    details: error.message\n                }, {\n                    status: 400\n                });\n            }\n            if (error.message.includes('429')) {\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                    error: 'Rate limit exceeded. Please wait a moment.'\n                }, {\n                    status: 429\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: 'Search failed. Please try again.'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO1FBQW1DLEdBQzVDO1lBQUVDLFFBQVE7UUFBSTtJQUV0QjtBQUNKIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGpvcmRvXFxPbmVEcml2ZVxcRGVza3RvcFxcY29tbWVyY2lhbCBpbmR1c3RyaWFsIHByb3BlcnRpZXMgc2dcXGluZHVzdHJpYWwtbGVucy1zZ1xcc3JjXFxhcHBcXGFwaVxcc2VhcmNoXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTmF0dXJhbCBMYW5ndWFnZSBQcm9wZXJ0eSBTZWFyY2ggQVBJXHJcbiAqIFVzZXMgR2VtaW5pIDIuMCBGbGFzaCB3aXRoIGZ1bmN0aW9uIGNhbGxpbmcgdG8gcGFyc2Ugc2VhcmNoIHF1ZXJpZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUksIENvbnRlbnQsIFBhcnQgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBHZW1pbmlcclxuY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZIHx8ICcnKTtcclxuXHJcbi8vIERlZmluZSB0aGUgZmlsdGVyUHJvcGVydGllcyB0b29sIGZvciBmdW5jdGlvbiBjYWxsaW5nXHJcbmNvbnN0IGZpbHRlclByb3BlcnRpZXNUb29sID0ge1xyXG4gICAgbmFtZTogJ2ZpbHRlclByb3BlcnRpZXMnLFxyXG4gICAgZGVzY3JpcHRpb246ICdGaWx0ZXIgaW5kdXN0cmlhbC9jb21tZXJjaWFsIHByb3BlcnRpZXMgYmFzZWQgb24gdXNlciBzZWFyY2ggY3JpdGVyaWEuIENhbGwgdGhpcyBmdW5jdGlvbiB3aGVuIHRoZSB1c2VyIHdhbnRzIHRvIHNlYXJjaCwgZmlsdGVyLCBvciBmaW5kIHByb3BlcnRpZXMuJyxcclxuICAgIHBhcmFtZXRlcnM6IHtcclxuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcclxuICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgIGFyZWE6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgYXJlYS9sb2NhdGlvbiBpbiBTaW5nYXBvcmUgKGUuZy4sIFwiVHVhc1wiLCBcIkp1cm9uZ1wiLCBcIldvb2RsYW5kc1wiLCBcIlViaVwiLCBcIlRhaSBTZW5nXCIpJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWF4UHJpY2U6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdNYXhpbXVtIHByaWNlIGluIFNHRC4gQ29udmVydCBcIjJNXCIgdG8gMjAwMDAwMCwgXCI1MDBLXCIgdG8gNTAwMDAwJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgem9uaW5nOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgIGVudW06IFsnQjEnLCAnQjInLCAnQjEvQjInLCAnYW55J10sXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0luZHVzdHJpYWwgem9uaW5nIHR5cGUuIEIxIGlzIGxpZ2h0IGluZHVzdHJpYWwsIEIyIGlzIGhlYXZ5IGluZHVzdHJpYWwnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaW5MZWFzZToge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ01pbmltdW0gcmVtYWluaW5nIGxlYXNlIGluIHllYXJzIChlLmcuLCAzMCwgNjAsIDk5KScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByb3BlcnR5VHlwZToge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgICAgICBlbnVtOiBbJ0ZhY3RvcnkvV2FyZWhvdXNlJywgJ09mZmljZScsICdTaG9wJywgJ2FueSddLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUeXBlIG9mIHByb3BlcnR5JyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgIGVudW06IFsnU2FsZScsICdSZW50JywgJ2FueSddLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdXaGV0aGVyIGxvb2tpbmcgdG8gYnV5IG9yIHJlbnQnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWlyZWQ6IFtdLFxyXG4gICAgfSxcclxufTtcclxuXHJcbi8vIFJlcXVlc3QvUmVzcG9uc2UgdHlwZXNcclxuaW50ZXJmYWNlIFNlYXJjaFJlcXVlc3Qge1xyXG4gICAgcXVlcnk6IHN0cmluZztcclxuICAgIGhpc3Rvcnk/OiBDb250ZW50W107XHJcbiAgICB0aG91Z2h0U2lnbmF0dXJlPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRmlsdGVyUmVzdWx0IHtcclxuICAgIGFyZWE/OiBzdHJpbmc7XHJcbiAgICBtYXhQcmljZT86IG51bWJlcjtcclxuICAgIHpvbmluZz86IHN0cmluZztcclxuICAgIG1pbkxlYXNlPzogbnVtYmVyO1xyXG4gICAgcHJvcGVydHlUeXBlPzogc3RyaW5nO1xyXG4gICAgdHJhbnNhY3Rpb25UeXBlPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU2VhcmNoUmVzcG9uc2Uge1xyXG4gICAgZmlsdGVycz86IEZpbHRlclJlc3VsdDtcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIHRob3VnaHRTaWduYXR1cmU/OiBzdHJpbmc7XHJcbiAgICBoaXN0b3J5OiBDb250ZW50W107XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGJvZHk6IFNlYXJjaFJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5LCBoaXN0b3J5ID0gW10sIHRob3VnaHRTaWduYXR1cmUgfSA9IGJvZHk7XHJcblxyXG4gICAgICAgIGlmICghcXVlcnkgfHwgdHlwZW9mIHF1ZXJ5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAnUXVlcnkgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIG1vZGVsIHdpdGggdGhpbmtpbmcgZW5hYmxlZFxyXG4gICAgICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcclxuICAgICAgICAgICAgbW9kZWw6ICdnZW1pbmktMi4wLWZsYXNoJyxcclxuICAgICAgICAgICAgdG9vbHM6IFt7IGZ1bmN0aW9uRGVjbGFyYXRpb25zOiBbZmlsdGVyUHJvcGVydGllc1Rvb2xdIH1dLFxyXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4xLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBCdWlsZCBjb252ZXJzYXRpb24gaGlzdG9yeSB3aXRoIHRob3VnaHQgc2lnbmF0dXJlIGhhbmRsaW5nXHJcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uSGlzdG9yeTogQ29udGVudFtdID0gW107XHJcblxyXG4gICAgICAgIC8vIEFkZCBwcmV2aW91cyBoaXN0b3J5IGlmIGV4aXN0c1xyXG4gICAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29udmVyc2F0aW9uSGlzdG9yeS5wdXNoKC4uLmhpc3RvcnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIHRoZSBuZXcgdXNlciBtZXNzYWdlXHJcbiAgICAgICAgY29uc3QgdXNlckNvbnRlbnQ6IENvbnRlbnQgPSB7XHJcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IHF1ZXJ5IH1dLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSB0aG91Z2h0IHNpZ25hdHVyZSBmcm9tIHByZXZpb3VzIHR1cm4sIGluY2x1ZGUgaXRcclxuICAgICAgICBpZiAodGhvdWdodFNpZ25hdHVyZSAmJiBjb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gVGhlIHRob3VnaHQgc2lnbmF0dXJlIHNob3VsZCBiZSBhc3NvY2lhdGVkIHdpdGggdGhlIGxhc3QgbW9kZWwgcmVzcG9uc2VcclxuICAgICAgICAgICAgLy8gVGhpcyBoZWxwcyBtYWludGFpbiBjb25zaXN0ZW5jeSBpbiBtdWx0aS10dXJuIGNvbnZlcnNhdGlvbnNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IGNoYXQgd2l0aCBoaXN0b3J5XHJcbiAgICAgICAgY29uc3QgY2hhdCA9IG1vZGVsLnN0YXJ0Q2hhdCh7XHJcbiAgICAgICAgICAgIGhpc3Rvcnk6IGNvbnZlcnNhdGlvbkhpc3RvcnksXHJcbiAgICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN5c3RlbSBwcm9tcHQgZm9yIGNvbnRleHRcclxuICAgICAgICBjb25zdCBzeXN0ZW1Db250ZXh0ID0gYFlvdSBhcmUgYW4gQUkgYXNzaXN0YW50IGZvciBJbmR1c3RyaWFsIExlbnMgU0csIGEgU2luZ2Fwb3JlIGNvbW1lcmNpYWwvaW5kdXN0cmlhbCBwcm9wZXJ0eSBzZWFyY2ggcGxhdGZvcm0uIFxyXG5XaGVuIHVzZXJzIGFzayBhYm91dCBmaW5kaW5nIHByb3BlcnRpZXMsIHVzZSB0aGUgZmlsdGVyUHJvcGVydGllcyBmdW5jdGlvbiB0byBleHRyYWN0IHRoZWlyIHNlYXJjaCBjcml0ZXJpYS5cclxuQmUgaGVscGZ1bCBhbmQgY29udmVyc2F0aW9uYWwuIElmIHRoZSB1c2VyJ3MgcmVxdWVzdCBpcyB1bmNsZWFyLCBhc2sgY2xhcmlmeWluZyBxdWVzdGlvbnMuXHJcblNpbmdhcG9yZSBhcmVhcyBpbmNsdWRlOiBUdWFzLCBKdXJvbmcsIFdvb2RsYW5kcywgVWJpLCBUYWkgU2VuZywgUGF5YSBMZWJhciwgQ2hhbmdpLCBNYW5kYWksIGV0Yy5cclxuUHJpY2UgZm9ybWF0czogXCIyTVwiID0gMjAwMDAwMCwgXCI1MDBLXCIgPSA1MDAwMDAsIFwiMy41TVwiID0gMzUwMDAwMC5gO1xyXG5cclxuICAgICAgICAvLyBTZW5kIHRoZSBxdWVyeSB3aXRoIHN5c3RlbSBjb250ZXh0XHJcbiAgICAgICAgY29uc3QgZnVsbFF1ZXJ5ID0gY29udmVyc2F0aW9uSGlzdG9yeS5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgPyBgJHtzeXN0ZW1Db250ZXh0fVxcblxcblVzZXIgcXVlcnk6ICR7cXVlcnl9YFxyXG4gICAgICAgICAgICA6IHF1ZXJ5O1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGF0LnNlbmRNZXNzYWdlKGZ1bGxRdWVyeSk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXN1bHQucmVzcG9uc2U7XHJcblxyXG4gICAgICAgIC8vIEV4dHJhY3QgdGhvdWdodCBzaWduYXR1cmUgaWYgcHJlc2VudCAoZm9yIG11bHRpLXR1cm4gY29uc2lzdGVuY3kpXHJcbiAgICAgICAgbGV0IG5ld1Rob3VnaHRTaWduYXR1cmU6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIGZ1bmN0aW9uIGNhbGwgaW4gdGhlIHJlc3BvbnNlXHJcbiAgICAgICAgY29uc3QgZnVuY3Rpb25DYWxsID0gcmVzcG9uc2UuZnVuY3Rpb25DYWxscygpPy5bMF07XHJcblxyXG4gICAgICAgIGxldCBmaWx0ZXJzOiBGaWx0ZXJSZXN1bHQgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2U6IHN0cmluZztcclxuXHJcbiAgICAgICAgaWYgKGZ1bmN0aW9uQ2FsbCAmJiBmdW5jdGlvbkNhbGwubmFtZSA9PT0gJ2ZpbHRlclByb3BlcnRpZXMnKSB7XHJcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpbHRlciBwYXJhbWV0ZXJzIGZyb20gdGhlIGZ1bmN0aW9uIGNhbGxcclxuICAgICAgICAgICAgZmlsdGVycyA9IGZ1bmN0aW9uQ2FsbC5hcmdzIGFzIEZpbHRlclJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgdXNlci1mcmllbmRseSBtZXNzYWdlXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlckRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlcnMuYXJlYSkgZmlsdGVyRGVzY3JpcHRpb25zLnB1c2goYGluICR7ZmlsdGVycy5hcmVhfWApO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVycy5tYXhQcmljZSkgZmlsdGVyRGVzY3JpcHRpb25zLnB1c2goYHVuZGVyICQkeyhmaWx0ZXJzLm1heFByaWNlIC8gMTAwMDAwMCkudG9GaXhlZCgxKX1NYCk7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJzLnpvbmluZyAmJiBmaWx0ZXJzLnpvbmluZyAhPT0gJ2FueScpIGZpbHRlckRlc2NyaXB0aW9ucy5wdXNoKGAke2ZpbHRlcnMuem9uaW5nfSB6b25pbmdgKTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlcnMubWluTGVhc2UpIGZpbHRlckRlc2NyaXB0aW9ucy5wdXNoKGB3aXRoIGF0IGxlYXN0ICR7ZmlsdGVycy5taW5MZWFzZX0geWVhciBsZWFzZWApO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVycy5wcm9wZXJ0eVR5cGUgJiYgZmlsdGVycy5wcm9wZXJ0eVR5cGUgIT09ICdhbnknKSBmaWx0ZXJEZXNjcmlwdGlvbnMucHVzaChmaWx0ZXJzLnByb3BlcnR5VHlwZSk7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJzLnRyYW5zYWN0aW9uVHlwZSAmJiBmaWx0ZXJzLnRyYW5zYWN0aW9uVHlwZSAhPT0gJ2FueScpIGZpbHRlckRlc2NyaXB0aW9ucy5wdXNoKGBmb3IgJHtmaWx0ZXJzLnRyYW5zYWN0aW9uVHlwZS50b0xvd2VyQ2FzZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgbWVzc2FnZSA9IGZpbHRlckRlc2NyaXB0aW9ucy5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICA/IGBTZWFyY2hpbmcgZm9yIHByb3BlcnRpZXMgJHtmaWx0ZXJEZXNjcmlwdGlvbnMuam9pbignLCAnKX1gXHJcbiAgICAgICAgICAgICAgICA6ICdTaG93aW5nIGFsbCBwcm9wZXJ0aWVzJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZWd1bGFyIHRleHQgcmVzcG9uc2UgKGNsYXJpZnlpbmcgcXVlc3Rpb24gb3IgZ2VuZXJhbCByZXNwb25zZSlcclxuICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlLnRleHQoKSB8fCAnSG93IGNhbiBJIGhlbHAgeW91IGZpbmQgYSBwcm9wZXJ0eT8nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQnVpbGQgdXBkYXRlZCBoaXN0b3J5IGZvciB0aGUgbmV4dCB0dXJuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEhpc3Rvcnk6IENvbnRlbnRbXSA9IFtcclxuICAgICAgICAgICAgLi4uY29udmVyc2F0aW9uSGlzdG9yeSxcclxuICAgICAgICAgICAgdXNlckNvbnRlbnQsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJvbGU6ICdtb2RlbCcsXHJcbiAgICAgICAgICAgICAgICBwYXJ0czogcmVzcG9uc2UuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cyB8fCBbeyB0ZXh0OiBtZXNzYWdlIH1dLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIEV4dHJhY3QgdGhvdWdodCBzaWduYXR1cmUgZnJvbSByZXNwb25zZSBtZXRhZGF0YSBpZiBhdmFpbGFibGVcclxuICAgICAgICAvLyBUaGlzIGlzIHVzZWQgZm9yIG11bHRpLXR1cm4gdGhpbmtpbmcgY29uc2lzdGVuY3lcclxuICAgICAgICBjb25zdCByZXNwb25zZU1ldGFkYXRhID0gcmVzcG9uc2UuY2FuZGlkYXRlcz8uWzBdO1xyXG4gICAgICAgIGlmIChyZXNwb25zZU1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGEgaGFzaC9zaWduYXR1cmUgZm9yIHRoZSB0aGlua2luZyBzdGF0ZVxyXG4gICAgICAgICAgICBuZXdUaG91Z2h0U2lnbmF0dXJlID0gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgdHVybjogdXBkYXRlZEhpc3RvcnkubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICB9KSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2VhcmNoUmVzcG9uc2U6IFNlYXJjaFJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICBmaWx0ZXJzLFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICB0aG91Z2h0U2lnbmF0dXJlOiBuZXdUaG91Z2h0U2lnbmF0dXJlLFxyXG4gICAgICAgICAgICBoaXN0b3J5OiB1cGRhdGVkSGlzdG9yeSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oc2VhcmNoUmVzcG9uc2UpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VhcmNoIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBHZW1pbmkgZXJyb3JzXHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQwMCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCc0MjknKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2Ugd2FpdCBhIG1vbWVudC4nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQyOSB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgZXJyb3I6ICdTZWFyY2ggZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiTmV4dFJlc3BvbnNlIiwiZ2VuQUkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJmaWx0ZXJQcm9wZXJ0aWVzVG9vbCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJ0eXBlIiwicHJvcGVydGllcyIsImFyZWEiLCJtYXhQcmljZSIsInpvbmluZyIsImVudW0iLCJtaW5MZWFzZSIsInByb3BlcnR5VHlwZSIsInRyYW5zYWN0aW9uVHlwZSIsInJlcXVpcmVkIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsInF1ZXJ5IiwiaGlzdG9yeSIsInRob3VnaHRTaWduYXR1cmUiLCJlcnJvciIsInN0YXR1cyIsIm1vZGVsIiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwidG9vbHMiLCJmdW5jdGlvbkRlY2xhcmF0aW9ucyIsImdlbmVyYXRpb25Db25maWciLCJ0ZW1wZXJhdHVyZSIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJsZW5ndGgiLCJwdXNoIiwidXNlckNvbnRlbnQiLCJyb2xlIiwicGFydHMiLCJ0ZXh0IiwiY2hhdCIsInN0YXJ0Q2hhdCIsInN5c3RlbUNvbnRleHQiLCJmdWxsUXVlcnkiLCJyZXN1bHQiLCJzZW5kTWVzc2FnZSIsInJlc3BvbnNlIiwibmV3VGhvdWdodFNpZ25hdHVyZSIsImZ1bmN0aW9uQ2FsbCIsImZ1bmN0aW9uQ2FsbHMiLCJmaWx0ZXJzIiwibWVzc2FnZSIsImFyZ3MiLCJmaWx0ZXJEZXNjcmlwdGlvbnMiLCJ0b0ZpeGVkIiwidG9Mb3dlckNhc2UiLCJqb2luIiwidXBkYXRlZEhpc3RvcnkiLCJjYW5kaWRhdGVzIiwiY29udGVudCIsInJlc3BvbnNlTWV0YWRhdGEiLCJCdWZmZXIiLCJmcm9tIiwiSlNPTiIsInN0cmluZ2lmeSIsInR1cm4iLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJzZWFyY2hSZXNwb25zZSIsImNvbnNvbGUiLCJFcnJvciIsImluY2x1ZGVzIiwiZGV0YWlscyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/search/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjordo%5COneDrive%5CDesktop%5Ccommercial%20industrial%20properties%20sg%5Cindustrial-lens-sg&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();